<husk:Modal
    x:Class="Polymerium.App.Modals.OobeModal"
    xmlns="https://github.com/avaloniaui"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:husk="https://github.com/d3ara1n/Huskui.Avalonia"
    xmlns:lang="https://github.com/d3ara1n/Polymerium/Languages"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:modals="clr-namespace:Polymerium.App.Modals"
    Width="520"
    mc:Ignorable="d">
    <DockPanel VerticalSpacing="24">
        <!--  Footer: Navigation Buttons  -->
        <StackPanel
            HorizontalAlignment="Right"
            DockPanel.Dock="Bottom"
            Orientation="Horizontal"
            Spacing="8">
            <Button Command="{Binding $parent[modals:OobeModal].GoBackCommand}" IsVisible="{Binding $parent[modals:OobeModal].IsBackAvailable, FallbackValue=False}">
                <TextBlock Text="{x:Static lang:Resources.OobeModal_BackButtonText}" />
            </Button>
            <Button
                Classes="Primary"
                Command="{Binding $parent[modals:OobeModal].GoNextCommand}"
                IsDefault="True"
                IsVisible="{Binding $parent[modals:OobeModal].IsLast, Converter={x:Static BoolConverters.Not}, FallbackValue=True}">
                <TextBlock Text="{x:Static lang:Resources.OobeModal_NextButtonText}" />
            </Button>
            <Button
                Classes="Primary"
                Command="{Binding $parent[modals:OobeModal].GoFinishCommand}"
                IsDefault="True"
                IsVisible="{Binding $parent[modals:OobeModal].IsLast, FallbackValue=False}">
                <TextBlock Text="{x:Static lang:Resources.OobeModal_FinishButtonText}" />
            </Button>
            <Button
                Command="{Binding $parent[modals:OobeModal].SkipCommand}"
                IsCancel="True"
                IsVisible="{Binding $parent[modals:OobeModal].IsLast, Converter={x:Static BoolConverters.Not}, FallbackValue=True}">
                <TextBlock Text="{x:Static lang:Resources.OobeModal_SkipButtonText}" />
            </Button>
        </StackPanel>

        <!--  Header: Step Indicator  -->
        <husk:StepControl
            x:Name="StepIndicator"
            HorizontalAlignment="Center"
            DockPanel.Dock="Top"
            IsHitTestVisible="False"
            SelectedIndex="{Binding $parent[modals:OobeModal].StepIndex, Mode=OneWay}"
            Theme="{StaticResource MinimalStepControlTheme}" />

        <!--  Content: Step Panels  -->
        <ScrollViewer>
            <TransitioningContentControl Content="{Binding $parent[modals:OobeModal].CurrentStep}" IsTransitionReversed="{Binding $parent[modals:OobeModal].IsReversed}">
                <TransitioningContentControl.PageTransition>
                    <CompositePageTransition>
                        <CrossFade
                            FadeInEasing="CubicEaseOut"
                            FadeOutEasing="CubicEaseIn"
                            Duration="{StaticResource ControlFasterAnimationDuration}" />
                        <PageSlide
                            SlideInEasing="CubicEaseOut"
                            SlideOutEasing="CubicEaseIn"
                            Duration="{StaticResource ControlFasterAnimationDuration}" />
                    </CompositePageTransition>
                </TransitioningContentControl.PageTransition>
            </TransitioningContentControl>
        </ScrollViewer>
    </DockPanel>
</husk:Modal>
