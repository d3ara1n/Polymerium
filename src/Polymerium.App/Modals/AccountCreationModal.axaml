<husk:Modal
    x:Class="Polymerium.App.Modals.AccountCreationModal"
    xmlns="https://github.com/avaloniaui"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:controls="clr-namespace:Polymerium.App.Controls"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:husk="https://github.com/d3ara1n/Huskui.Avalonia"
    xmlns:lang="https://github.com/d3ara1n/Polymerium/Languages"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:modals="clr-namespace:Polymerium.App.Modals"
    Width="300"
    mc:Ignorable="d">
    <DockPanel VerticalSpacing="24">
        <StackPanel
            HorizontalAlignment="Right"
            DockPanel.Dock="Bottom"
            Orientation="Horizontal"
            Spacing="8">
            <Button
                IsVisible="{Binding $parent[modals:AccountCreationModal].IsBackAvailable, FallbackValue=True}"
                Command="{Binding $parent[modals:AccountCreationModal].GoBackCommand}">
                <TextBlock Text="{x:Static lang:Resources.AccountCreationModal_BackButtonText}" />
            </Button>
            <Button
                Classes="Primary"
                IsEnabled="{Binding $parent[modals:AccountCreationModal].((controls:AccountCreationStep)CurrentStep).IsNextAvailable, Mode=OneWay, FallbackValue=False}"
                IsVisible="{Binding $parent[modals:AccountCreationModal].IsLast, Converter={x:Static BoolConverters.Not}, FallbackValue=False}"
                Command="{Binding $parent[modals:AccountCreationModal].GoNextCommand}"
                IsDefault="True">
                <TextBlock Text="{x:Static lang:Resources.AccountCreationModal_NextButtonText}" />
            </Button>
            <Button
                Classes="Primary"
                IsVisible="{Binding $parent[modals:AccountCreationModal].IsLast, FallbackValue=True}"
                Command="{Binding $parent[modals:AccountCreationModal].GoFinishCommand}"
                IsDefault="True">
                <TextBlock Text="{x:Static lang:Resources.AccountCreationModal_FinishButtonText}" />
            </Button>
            <Button
                Command="{Binding $parent[modals:AccountCreationModal].Dismiss}"
                IsCancel="True">
                <TextBlock Text="{x:Static lang:Resources.AccountCreationModal_DismissButtonText}" />
            </Button>
        </StackPanel>
        <TransitioningContentControl
            Content="{Binding $parent[modals:AccountCreationModal].CurrentStep}"
            IsTransitionReversed="{Binding $parent[modals:AccountCreationModal].IsReversed}">
            <TransitioningContentControl.PageTransition>
                <CompositePageTransition>
                    <CrossFade
                        FadeInEasing="CubicEaseOut"
                        FadeOutEasing="CubicEaseIn"
                        Duration="{StaticResource ControlFasterAnimationDuration}" />
                    <PageSlide
                        SlideInEasing="CubicEaseOut"
                        SlideOutEasing="CubicEaseIn"
                        Duration="{StaticResource ControlFasterAnimationDuration}" />
                </CompositePageTransition>
            </TransitioningContentControl.PageTransition>
        </TransitioningContentControl>
    </DockPanel>
</husk:Modal>
