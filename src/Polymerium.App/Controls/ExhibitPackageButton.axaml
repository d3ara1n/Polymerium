<ResourceDictionary
    xmlns="https://github.com/avaloniaui"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:async="clr-namespace:AsyncImageLoader;assembly=AsyncImageLoader.Avalonia"
    xmlns:components="clr-namespace:Polymerium.App.Components"
    xmlns:controls="clr-namespace:Polymerium.App.Controls"
    xmlns:husk="https://github.com/d3ara1n/Huskui.Avalonia"
    xmlns:icons="https://github.com/MahApps/IconPacks.Avalonia"
    xmlns:m="clr-namespace:Polymerium.App.Models">
    <ControlTheme
        x:Key="{x:Type controls:ExhibitPackageButton}"
        TargetType="controls:ExhibitPackageButton">
        <Setter Property="Cursor" Value="Hand" />
        <Setter Property="Background" Value="{StaticResource CardBackgroundBrush}" />
        <Setter Property="CornerRadius" Value="{StaticResource MediumCornerRadius}" />
        <Setter Property="BorderBrush" Value="{StaticResource ControlBorderBrush}" />
        <Setter Property="ClipToBounds" Value="False" />
        <Setter Property="BorderThickness" Value="1" />
        <Setter Property="Template">
            <ControlTemplate x:DataType="m:ExhibitModel">
                <Border
                    Name="Background"
                    Background="{TemplateBinding Background}"
                    BorderBrush="{TemplateBinding BorderBrush}"
                    BorderThickness="{TemplateBinding BorderThickness}"
                    CornerRadius="{TemplateBinding CornerRadius}">
                    <Border.Transitions>
                        <Transitions>
                            <BrushTransition
                                Easing="SineEaseOut"
                                Property="BorderBrush"
                                Duration="{StaticResource ControlFasterAnimationDuration}" />
                            <TransformOperationsTransition
                                Easing="SineEaseOut"
                                Property="RenderTransform"
                                Duration="{StaticResource ControlFastestAnimationDuration}" />
                        </Transitions>
                    </Border.Transitions>
                    <ToolTip.Tip>
                        <Grid
                            MaxWidth="300"
                            Margin="{StaticResource ToolTipFillMargin}"
                            RowDefinitions="*,Auto">
                            <Border Grid.Row="0">
                                <StackPanel Margin="12">
                                    <TextBlock
                                        FontSize="{StaticResource LargeFontSize}"
                                        FontWeight="{StaticResource ControlStrongFontWeight}"
                                        Text="{Binding ProjectName}"
                                        TextWrapping="Wrap" />
                                    <TextBlock
                                        Text="{Binding Summary}"
                                        TextWrapping="Wrap" />
                                </StackPanel>
                            </Border>
                            <Border
                                Grid.Row="1"
                                Padding="6"
                                Background="{StaticResource ControlBackgroundBrush}"
                                CornerRadius="{Binding Source={StaticResource SmallCornerRadius}, Converter={x:Static husk:CornerRadiusConverters.Lower}}">
                                <Grid
                                    ColumnDefinitions="*,Auto"
                                    ColumnSpacing="4">
                                    <Border
                                        Grid.Column="0"
                                        Padding="4,2"
                                        HorizontalAlignment="Left"
                                        Background="{StaticResource LayerBackgroundBrush}"
                                        BorderBrush="{StaticResource ControlBorderBrush}"
                                        BorderThickness="1"
                                        CornerRadius="{StaticResource SmallCornerRadius}">
                                        <StackPanel
                                            Orientation="Horizontal"
                                            Spacing="4">
                                            <icons:PackIconLucide
                                                Width="{StaticResource MediumFontSize}"
                                                Height="{StaticResource MediumFontSize}"
                                                VerticalAlignment="Center"
                                                Kind="CircleUser" />
                                            <TextBlock
                                                VerticalAlignment="Center"
                                                Text="{Binding Author}" />
                                        </StackPanel>
                                    </Border>
                                    <StackPanel
                                        Grid.Column="1"
                                        Orientation="Horizontal"
                                        Spacing="4">
                                        <Border
                                            Padding="4,2"
                                            Background="{StaticResource LayerBackgroundBrush}"
                                            BorderBrush="{StaticResource ControlBorderBrush}"
                                            BorderThickness="1"
                                            CornerRadius="{StaticResource SmallCornerRadius}">
                                            <StackPanel
                                                Orientation="Horizontal"
                                                Spacing="4">
                                                <icons:PackIconLucide
                                                    Width="{StaticResource MediumFontSize}"
                                                    Height="{StaticResource MediumFontSize}"
                                                    VerticalAlignment="Center"
                                                    Kind="CircleArrowDown" />
                                                <TextBlock
                                                    VerticalAlignment="Center"
                                                    Text="{Binding Downloads}" />
                                            </StackPanel>
                                        </Border>
                                        <Border
                                            Padding="4,2"
                                            Background="{StaticResource LayerBackgroundBrush}"
                                            BorderBrush="{StaticResource ControlBorderBrush}"
                                            BorderThickness="1"
                                            CornerRadius="{StaticResource SmallCornerRadius}">
                                            <StackPanel
                                                Orientation="Horizontal"
                                                Spacing="4">
                                                <icons:PackIconLucide
                                                    Width="{StaticResource MediumFontSize}"
                                                    Height="{StaticResource MediumFontSize}"
                                                    VerticalAlignment="Center"
                                                    Kind="Clock" />
                                                <TextBlock
                                                    VerticalAlignment="Center"
                                                    Text="{Binding UpdatedAt}" />
                                            </StackPanel>
                                        </Border>
                                    </StackPanel>
                                </Grid>
                            </Border>
                        </Grid>
                    </ToolTip.Tip>
                    <Grid RowDefinitions="Auto,*">
                        <Border Grid.Row="0">
                            <Panel>
                                <Border
                                    Width="64"
                                    Height="64"
                                    Margin="12"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"
                                    CornerRadius="{StaticResource SmallCornerRadius}">
                                    <Border.Background>
                                        <ImageBrush async:ImageBrushLoader.Source="{Binding Thumbnail}" />
                                    </Border.Background>
                                </Border>
                                <components:ExhibitStatePresenter
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Bottom"
                                    RenderTransform="translateY(8px)"
                                    State="{Binding State}" />
                            </Panel>
                        </Border>
                        <Border
                            Grid.Row="1"
                            Padding="8"
                            Background="{StaticResource ControlTranslucentHalfBackgroundBrush}"
                            CornerRadius="{Binding Source={StaticResource MediumCornerRadius}, Converter={x:Static husk:CornerRadiusConverters.Lower}}">
                            <Grid>
                                <TextBlock
                                    FontWeight="{StaticResource ControlStrongFontWeight}"
                                    MaxLines="2"
                                    Text="{Binding ProjectName}"
                                    TextAlignment="Center"
                                    TextTrimming="CharacterEllipsis"
                                    TextWrapping="Wrap" />
                            </Grid>
                        </Border>
                    </Grid>
                </Border>
            </ControlTemplate>
        </Setter>

        <Style Selector="^:pointerover /template/ Border#Background">
            <Setter Property="BorderBrush" Value="{StaticResource ControlAccentInteractiveBorderBrush}" />
        </Style>
        <Style Selector="^:pointerover /template/ Border#Background">
            <Setter Property="RenderTransform" Value="scale(1.05)" />
        </Style>
        <Style Selector="^:pressed /template/ Border#Background">
            <Setter Property="RenderTransform" Value="scale(0.98)" />
        </Style>

        <Style Selector="^:disabled /template/ Border#Background">
            <Setter Property="Opacity" Value="{StaticResource ControlDimOpacity}" />
        </Style>
    </ControlTheme>
</ResourceDictionary>
