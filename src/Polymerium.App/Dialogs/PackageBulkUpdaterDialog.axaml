<husk:Dialog
    x:Class="Polymerium.App.Dialogs.PackageBulkUpdaterDialog"
    xmlns="https://github.com/avaloniaui"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:asyncImageLoader="clr-namespace:AsyncImageLoader;assembly=AsyncImageLoader.Avalonia"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:dialogs="clr-namespace:Polymerium.App.Dialogs"
    xmlns:husk="https://github.com/d3ara1n/Huskui.Avalonia"
    xmlns:icons="https://github.com/MahApps/IconPacks.Avalonia"
    xmlns:lang="https://github.com/d3ara1n/Polymerium/Languages"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:models="clr-namespace:Polymerium.App.Models"
    Title="{x:Static lang:Resources.PackageBulkUpdaterModal_Title}"
    d:DesignHeight="450"
    d:DesignWidth="800"
    IsPrimaryButtonVisible="True"
    mc:Ignorable="d">
    <Panel>
        <StackPanel
            VerticalAlignment="Center"
            IsVisible="{Binding $parent[dialogs:PackageBulkUpdaterDialog].Result, Converter={x:Static husk:CollectionConverters.IsEmpty}, FallbackValue=True}"
            Spacing="8">
            <icons:PackIconLucide
                Width="{StaticResource ExtraLargeFontSize}"
                Height="{StaticResource ExtraLargeFontSize}"
                HorizontalAlignment="Center"
                Foreground="{StaticResource ControlSecondaryForegroundBrush}"
                Kind="Package" />
            <TextBlock
                HorizontalAlignment="Center"
                FontSize="{StaticResource LargeFontSize}"
                Foreground="{StaticResource ControlSecondaryForegroundBrush}"
                Text="{x:Static lang:Resources.Shared_EmptyListLabelText}" />
        </StackPanel>
        <ScrollViewer Margin="-18,0">
            <ItemsControl Margin="18,0" ItemsSource="{Binding $parent[dialogs:PackageBulkUpdaterDialog].Result}">
                <ItemsControl.ItemTemplate>
                    <DataTemplate DataType="models:PackageUpdaterModel">
                        <Border
                            Margin="3"
                            Padding="12"
                            Background="{StaticResource OverlaySolidBackgroundBrush}"
                            BoxShadow="0 0 4 0 #3F000000"
                            CornerRadius="{StaticResource MediumCornerRadius}">
                            <Grid ColumnDefinitions="Auto,*,Auto" ColumnSpacing="12">
                                <Border
                                    Grid.Column="0"
                                    Width="{Binding $self.Bounds.Height}"
                                    CornerRadius="{StaticResource SmallCornerRadius}"
                                    ToolTip.Tip="{Binding Package.ProjectName}">
                                    <Border.Background>
                                        <ImageBrush asyncImageLoader:ImageBrushLoader.Source="{Binding Thumbnail}" />
                                    </Border.Background>
                                </Border>
                                <StackPanel Grid.Column="1">
                                    <TextBlock
                                        FontWeight="{StaticResource ControlStrongFontWeight}"
                                        Foreground="{StaticResource ControlAccentForegroundBrush}"
                                        Text="{Binding NewVersionName}"
                                        TextTrimming="CharacterEllipsis" />
                                    <TextBlock
                                        Background="Transparent"
                                        FontSize="{StaticResource SmallFontSize}"
                                        Foreground="{StaticResource ControlSecondaryForegroundBrush}"
                                        Text="{Binding NewVersionTime}"
                                        TextTrimming="CharacterEllipsis"
                                        ToolTip.Tip="{Binding NewVersionTimeRaw}" />
                                    <TextBlock
                                        FontWeight="{StaticResource ControlStrongFontWeight}"
                                        Foreground="{StaticResource ControlSecondaryForegroundBrush}"
                                        Text="{Binding OldVersionName}"
                                        TextTrimming="CharacterEllipsis" />
                                    <TextBlock
                                        Background="Transparent"
                                        FontSize="{StaticResource SmallFontSize}"
                                        Foreground="{StaticResource ControlSecondaryForegroundBrush}"
                                        Text="{Binding OldVersionTime}"
                                        TextTrimming="CharacterEllipsis"
                                        ToolTip.Tip="{Binding OldVersionTimeRaw}" />
                                </StackPanel>
                                <Grid Grid.Column="2" RowDefinitions="*,*">
                                    <CheckBox
                                        Grid.Row="0"
                                        HorizontalAlignment="Right"
                                        VerticalAlignment="Center"
                                        IsChecked="{Binding IsChecked, Mode=TwoWay}" />
                                    <icons:PackIconLucide
                                        Grid.Row="1"
                                        Width="{StaticResource MediumFontSize}"
                                        Height="{StaticResource MediumFontSize}"
                                        VerticalAlignment="Center"
                                        Kind="CornerUpLeft" />
                                </Grid>
                            </Grid>
                        </Border>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </ScrollViewer>
    </Panel>
</husk:Dialog>
